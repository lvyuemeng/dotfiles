#!/usr/bin/env bash

# Install Nerd Fonts
# This script uses the official nerd-fonts install script

set -euo pipefail

fonts=("0xProto")

echo "Installing Nerd Fonts..."

# Check if already installed
font_dir="${HOME}/.local/share/fonts"
if [ -d "$font_dir" ]; then
    already_installed=true
    for font in "${fonts[@]}"; do
        if ! ls "$font_dir"/*"$font"* &>/dev/null; then
            already_installed=false
            break
        fi
    done
    
    if [ "$already_installed" = true ]; then
        echo "All fonts already installed"
        exit 0
    fi
fi

# Download install script
script_url="https://raw.githubusercontent.com/ryanoasis/nerd-fonts/refs/heads/master/install.sh"
temp_script="/tmp/nerd-fonts-install.sh"

echo "Downloading nerd-fonts install script..."
if ! curl -fsSL "$script_url" -o "$temp_script"; then
    echo "Error: Failed to download install script"
    exit 1
fi

chmod +x "$temp_script"

# Install fonts
echo "Installing fonts: ${fonts[*]}"
for font in "${fonts[@]}"; do
    echo "  Installing $font..."
    "$temp_script" "$font" || echo "Warning: Failed to install $font"
done

# Cleanup
rm -f "$temp_script"

echo "Font installation complete."
